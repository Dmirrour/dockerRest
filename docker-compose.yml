version: "3.8"
services:
  # configuracion del servicio apache
  java_app:
    container_name: java_app
    image: tnosql-rest:1.0
    build: .
    links:
        - mongoRest
    ports:
      - "8080:8080"
    environment:
        - MONGO_HOST=mongo
        - MONGO_PORT=27017
        - MONGO_DB=tnosql
        - MONGO_USER=root
        - MONGO_PASS=password
    depends_on:
        - mongoRest
  mongoRest:
    # docker pull mongo:7.0.2
    image: mongo
    container_name: mongorest
    environment:
      - MONGO_INITDB_ROOT_USERNAME=root
      - MONGO_INITDB_ROOT_PASSWORD=password
    restart: unless-stopped
    ports:
      - "27017:27017"
    volumes:
      - ./database/mongodb/db:/data/db
      - ./database/mongodb/dev.archive:/Databases/dev.archive
      - ./database/mongodb/production:/Databases/production
